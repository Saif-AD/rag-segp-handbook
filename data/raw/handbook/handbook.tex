%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% How to use writeLaTeX: 
%
% You edit the source code here on the left, and the preview on the
% right shows you the result within a few seconds.
%
% Bookmark this page and share the URL with your co-authors. They can
% edit at the same time!
%
% You can upload figures, bibliographies, custom classes and
% styles using the files menu.
%
% If you're new to LaTeX, the wikibook is a great place to start:
% http://en.wikibooks.org/wiki/LaTeX
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[a4paper,twoside,symmetric]{tufte-book}


\setcounter{tocdepth}{3}
\setcounter{secnumdepth}{3}

\hypersetup{colorlinks}% uncomment this line if you prefer colored hyperlinks (e.g., for onscreen viewing)

%%
% Book metadata
\title{Software Engineering Group Project Handbook 2025/26}
\author[Jeroen Keppens]{Jeroen Keppens}
\publisher{Department of Informatics\\King's College London}

%% Potential problem packages for latexml
\usepackage{smartdiagram}
\usepackage{etoolbox}
\usepackage{enumitem}
\usepackage{pgffor} 

%%
% If they're installed, use Bergamo and Chantilly from www.fontsite.com.
% They're clones of Bembo and Gill Sans, respectively.
%\IfFileExists{bergamo.sty}{\usepackage[osf]{bergamo}}{}% Bembo
%\IfFileExists{chantill.sty}{\usepackage{chantill}}{}% Gill Sans

\usepackage{amsmath}
\usepackage{longtable}
\usepackage{pgfplots}
\usepackage[UKenglish]{babel}
\usepackage{acronym}
\usepackage{multirow}
\pgfplotsset{compat=1.9}
\usetikzlibrary{shapes,shapes.geometric,arrows}
\usetikzlibrary{positioning, shapes, arrows.meta, fit}

\usepackage{listings}

%\usepackage{microtype}

%%
% Just some sample text
\usepackage{lipsum}

%%
% For nicely typeset tabular material
\usepackage{booktabs}

%%
% For graphics / images
\usepackage{graphicx}
\setkeys{Gin}{width=\linewidth,totalheight=\textheight,keepaspectratio}
\graphicspath{{graphics/}}

% The fancyvrb package lets us customize the formatting of verbatim
% environments.  We use a slightly smaller font.
\usepackage{fancyvrb}
\fvset{fontsize=\normalsize}


%%% DRAFT WATERMARK
%\usepackage{draftwatermark}
%\SetWatermarkText{DRAFT}
%\SetWatermarkScale{1}


%%
% Prints argument within hanging parentheses (i.e., parentheses that take
% up no horizontal space).  Useful in tabular environments.
\newcommand{\hangp}[1]{\makebox[0pt][r]{(}#1\makebox[0pt][l]{)}}

%%
% Prints an asterisk that takes up no horizontal space.
% Useful in tabular environments.
\newcommand{\hangstar}{\makebox[0pt][l]{*}}

%%
% Prints a trailing space in a smart way.
\usepackage{xspace}

%%
% Some shortcuts for Tufte's book titles.  The lowercase commands will
% produce the initials of the book title in italics.  The all-caps commands
% will print out the full title of the book in italics.
\newcommand{\vdqi}{\textit{VDQI}\xspace}
\newcommand{\ei}{\textit{EI}\xspace}
\newcommand{\ve}{\textit{VE}\xspace}
\newcommand{\be}{\textit{BE}\xspace}
\newcommand{\VDQI}{\textit{The Visual Display of Quantitative Information}\xspace}
\newcommand{\EI}{\textit{Envisioning Information}\xspace}
\newcommand{\VE}{\textit{Visual Explanations}\xspace}
\newcommand{\BE}{\textit{Beautiful Evidence}\xspace}

\newcommand{\TL}{Tufte-\LaTeX\xspace}

% Prints the month name (e.g., January) and the year (e.g., 2008)
\newcommand{\monthyear}{%
  \ifcase\month\or January\or February\or March\or April\or May\or June\or
  July\or August\or September\or October\or November\or
  December\fi\space\number\year
}


% Prints an epigraph and speaker in sans serif, all-caps type.
\newcommand{\openepigraph}[2]{%
  %\sffamily\fontsize{14}{16}\selectfont
  \begin{fullwidth}
  \sffamily\large
  \begin{doublespace}
  \noindent\allcaps{#1}\\% epigraph
  \noindent\allcaps{#2}% author
  \end{doublespace}
  \end{fullwidth}
}

% Inserts a blank page
\newcommand{\blankpage}{\newpage\hbox{}\thispagestyle{empty}\newpage}

\usepackage{units}

% Typesets the font size, leading, and measure in the form of 10/12x26 pc.
\newcommand{\measure}[3]{#1/#2$\times$\unit[#3]{pc}}

% Macros for typesetting the documentation
\newcommand{\hlred}[1]{\textcolor{Maroon}{#1}}% prints in red
\newcommand{\hangleft}[1]{\makebox[0pt][r]{#1}}
\newcommand{\hairsp}{\hspace{1pt}}% hair space
\newcommand{\hquad}{\hskip0.5em\relax}% half quad space
\newcommand{\TODO}{\textcolor{red}{\bf TODO!}\xspace}
\newcommand{\ie}{\textit{i.\hairsp{}e.}\xspace}
\newcommand{\eg}{\textit{e.\hairsp{}g.}\xspace}
\newcommand{\na}{\quad--}% used in tables for N/A cells
\providecommand{\XeLaTeX}{X\lower.5ex\hbox{\kern-0.15em\reflectbox{E}}\kern-0.1em\LaTeX}
\newcommand{\tXeLaTeX}{\XeLaTeX\index{XeLaTeX@\protect\XeLaTeX}}
% \index{\texttt{\textbackslash xyz}@\hangleft{\texttt{\textbackslash}}\texttt{xyz}}
\newcommand{\tuftebs}{\symbol{'134}}% a backslash in tt type in OT1/T1
\newcommand{\doccmdnoindex}[2][]{\texttt{\tuftebs#2}}% command name -- adds backslash automatically (and doesn't add cmd to the index)
\newcommand{\doccmddef}[2][]{%
  \hlred{\texttt{\tuftebs#2}}\label{cmd:#2}%
  \ifthenelse{\isempty{#1}}%
    {% add the command to the index
      \index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2}}% command name
    }%
    {% add the command and package to the index
      \index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2} (\texttt{#1} package)}% command name
      \index{#1 package@\texttt{#1} package}\index{packages!#1@\texttt{#1}}% package name
    }%
}% command name -- adds backslash automatically
\newcommand{\doccmd}[2][]{%
  \texttt{\tuftebs#2}%
  \ifthenelse{\isempty{#1}}%
    {% add the command to the index
      \index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2}}% command name
    }%
    {% add the command and package to the index
      \index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2} (\texttt{#1} package)}% command name
      \index{#1 package@\texttt{#1} package}\index{packages!#1@\texttt{#1}}% package name
    }%
}% command name -- adds backslash automatically
\newcommand{\docopt}[1]{\ensuremath{\langle}\textrm{\textit{#1}}\ensuremath{\rangle}}% optional command argument
\newcommand{\docarg}[1]{\textrm{\textit{#1}}}% (required) command argument
\newenvironment{docspec}{\begin{quotation}\ttfamily\parskip0pt\parindent0pt\ignorespaces}{\end{quotation}}% command specification environment
\newcommand{\docenv}[1]{\texttt{#1}\index{#1 environment@\texttt{#1} environment}\index{environments!#1@\texttt{#1}}}% environment name
\newcommand{\docenvdef}[1]{\hlred{\texttt{#1}}\label{env:#1}\index{#1 environment@\texttt{#1} environment}\index{environments!#1@\texttt{#1}}}% environment name
\newcommand{\docpkg}[1]{\texttt{#1}\index{#1 package@\texttt{#1} package}\index{packages!#1@\texttt{#1}}}% package name
\newcommand{\doccls}[1]{\texttt{#1}}% document class name
\newcommand{\docclsopt}[1]{\texttt{#1}\index{#1 class option@\texttt{#1} class option}\index{class options!#1@\texttt{#1}}}% document class option name
\newcommand{\docclsoptdef}[1]{\hlred{\texttt{#1}}\label{clsopt:#1}\index{#1 class option@\texttt{#1} class option}\index{class options!#1@\texttt{#1}}}% document class option name defined
\newcommand{\docmsg}[2]{\bigskip\begin{fullwidth}\noindent\ttfamily#1\end{fullwidth}\medskip\par\noindent#2}
\newcommand{\docfilehook}[2]{\texttt{#1}\index{file hooks!#2}\index{#1@\texttt{#1}}}
\newcommand{\doccounter}[1]{\texttt{#1}\index{#1 counter@\texttt{#1} counter}}

% Generates the index
\usepackage{imakeidx}
\makeindex

% Settings for XML conversion 
% \input{fallback.sty}
\usepackage{natbib}



% Define the FAQ threshold
\newcommand{\faqthreshold}{2}

% Define a counter to store FAQ items
\newcounter{faqcount}
\setcounter{faqcount}{0}

% Define a command to add FAQ items
\newcommand{\addfaq}[1]{%
    \expandafter\def\csname faqitem\thefaqcount\endcsname{#1} % Store the FAQ item in a unique macro
    \stepcounter{faqcount} % Increment the FAQ counter
}


% Define the \faq command
\newcommand{\faq}[3][1]{%
    % Arguments: #1 = priority (default 1), #2 = formatting (e.g., 10mm), #3 = question text
    \ifnum#1>\faqthreshold\relax
    % Do nothing if the priority is higher than the threshold
    \else
    	\label{faq:\thefaqcount}
        \marginnote[#2]{\newthought{FAQ}: #3}      
        \addfaq{#3}{} % Add question text and page number
    \fi
}




\makeatletter

\newcounter{tfaqcount}
\newcommand{\tfaq@entries}{}
\newcommand{\tfaq@topics}{}

\newcommand{\tfaq@skipquestion}{*}

\newcommand{\tfaq}[4][1]{%
  \refstepcounter{tfaqcount}%
  \hypertarget{tfaq@\thetfaqcount}{}% define target early
  % Arguments: #1 = priority (default 1), #2 = formatting (e.g., 10mm), #3 = question text
  \ifnum#1>\faqthreshold\relax
    % Do nothing if the priority is higher than the threshold
  \else
    \if#3\tfaq@skipquestion
       % skip
    \else
      \label{tfaq@\thetfaqcount} 
      \marginnote[#2]{\newthought{FAQ}: #3}      
    \fi  
    \addfaq{#3}{} % Add question text and page number
    \protected@write\@auxout{}{%
      \string\addtfaqentry{\thetfaqcount}{#3}{#4}%
    }%
  \fi
}

\def\addtfaqentry#1#2#3{%
  \expandafter\gdef\csname faqtext@#1\endcsname{#2}%
  \expandafter\gdef\csname faqtopic@#1\endcsname{#3}%
  \edef\@temp{\noexpand\g@addto@macro\noexpand\tfaq@entries{#1,}}%
  \@temp
  \edef\@checkdup{\noexpand\ifx\csname topic@#3\endcsname\relax
     \noexpand\gdef\csname topic@#3\endcsname{}%
     \noexpand\g@addto@macro\noexpand\tfaq@topics{#3,}%
  \noexpand\fi}%
  \@checkdup
}


\def\printtfaqs{%
  \chapter{Frequently asked questions}%
  \@for\topic:=\tfaq@topics\do{%
    \subsection*{\topic}%
    \begingroup
    \def\found{0}%
    \@for\id:=\tfaq@entries\do{%
      \expandafter\let\expandafter\thisTopic\csname faqtopic@\id\endcsname
      \edef\check{\thisTopic}%
      \ifx\check\topic
        \def\found{1}%
      \fi
    }%
    \ifnum\found=1
      \begin{itemize}%
      \@for\id:=\tfaq@entries\do{%
        \expandafter\let\expandafter\thisTopic\csname faqtopic@\id\endcsname
        \expandafter\let\expandafter\thisText\csname faqtext@\id\endcsname
        \edef\check{\thisTopic}%
        \ifx\check\topic
          \if\thisText\tfaq@skipquestion
            % skip
          \else
            \item \hypertarget{faq@\id}{}%
                     \thisText\ (\hyperlink{tfaq@\id}{p.~\pageref{tfaq@\id}})%
          \fi
        \fi
      }%
      \end{itemize}%
    \fi
    \endgroup
  }%
}
\newcommand{\tfaqtopic}[1]{\tfaq[1]{0mm}{*}{#1}}
\makeatother





% Expectations
\newcommand{\expectation}[2][0mm]{
\marginnote[#1]{\newthought{Expectation}: #2}
}



\usepackage[useregional,calc]{datetime2}

% Save “today” as a named date
\DTMsavenow{today}

% Usage: \IncludeBeforeDate{YYYY-MM-DD}{<before content>}{<after content>}
\newcommand{\IncludeBeforeDate}[3]{%
  \DTMsavedate{CutoffDate}{#1}% store cutoff date
  \DTMifdate
    {today}
    {at most=\DTMfetchyear{CutoffDate}-\DTMfetchmonth{CutoffDate}-\DTMfetchday{CutoffDate}}%
    {#2}% content if today ≤ cutoff
    {#3}% content if today > cutoff
}





\begin{document}


% Front matter
\frontmatter

% r.3 full title page
\maketitle

\tfaqtopic{Code~contribution}
\tfaqtopic{Code~quality}
\tfaqtopic{Code~quality:~Code~structure}
\tfaqtopic{Code~quality:~Comments}
\tfaqtopic{Code~quality:~Error~handling}
\tfaqtopic{Code~quality:~Formatting}
\tfaqtopic{Code~quality:~Functions}
\tfaqtopic{Code~quality:~Naming}
\tfaqtopic{Code~quality:~Testing}
\tfaqtopic{Communication}
\tfaqtopic{Design}
\tfaqtopic{Extenuating~circumstances}
\tfaqtopic{General~questions}
\tfaqtopic{Handbook}
\tfaqtopic{Kanban~board}
\tfaqtopic{Leadership}
\tfaqtopic{Major~group~project}
\tfaqtopic{Marking}
\tfaqtopic{Peer~assessments}
\tfaqtopic{Project~management}
\tfaqtopic{Small~group~project}
\tfaqtopic{Team~feedback}
\tfaqtopic{Team~meetings}
\tfaqtopic{Team~member~issues}
\tfaqtopic{Testing}
\tfaqtopic{Tools}
\tfaqtopic{Version~control}


% v.4 copyright page
\newpage
\begin{fullwidth}
~\vfill
\thispagestyle{empty}
\setlength{\parindent}{0pt}
\setlength{\parskip}{\baselineskip}
Copyright \copyright\ \the\year\ \thanklessauthor

\par\smallcaps{Published by \thanklesspublisher}

%\par\smallcaps{tufte-latex.googlecode.com}

%\par Licensed under the Apache License, Version 2.0 (the ``License''); you may not
%use this file except in compliance with the License. You may obtain a copy
%of the License at \url{http://www.apache.org/licenses/LICENSE-2.0}. Unless
%required by applicable law or agreed to in writing, software distributed
%under the License is distributed on an \smallcaps{``AS IS'' BASIS, WITHOUT
%WARRANTIES OR CONDITIONS OF ANY KIND}, either express or implied. See the
%License for the specific language governing permissions and limitations
%under the License.\index{license}

\par\textit{Current version: \monthyear}
\end{fullwidth}

% r.5 contents
\tableofcontents

%\listoffigures

%\listoftables

% r.7 dedication
%\cleardoublepage
%~\vfill
%\begin{doublespace}
%\noindent\fontsize{18}{22}\selectfont\itshape
%\nohyphenation
%Dedicated to those who appreciate \LaTeX{} 
%and the work of \mbox{Edward R.~Tufte} 
%and \mbox{Donald E.~Knuth}.
%\end{doublespace}
%\vfill
%\vfill





%%% Acronyms not requiring definition
\acused{DRY}
\acused{WYSIWYG}

% r.9 introduction
\cleardoublepage



%%
% Start the main matter (normal chapters)
\mainmatter


\include{introduction}
\include{study_guide}
\include{tools}
\include{general_expectations}
\include{project_management}
\include{software_engineering}
\include{small_group_project}
\include{major_group_project}

\appendix
\include{team_charter_checklist}
\include{code_inspection_checklist}
\include{unix_cli_reference}
\include{git_reference}


\renewenvironment{fullwidth}
{\newgeometry{% full width pages
        %layoutheight =240mm,layoutwidth  =170mm,
        %textheight=38\baselineskip,
        %headheight=\baselineskip,
        %left=15mm, % right will be the same because of symmetric
        %bindingoffset= 5mm, % add space for binding 
        %textwidth=136mm, % 90+ 6+ 40
        %top=14mm,
        marginparsep=0mm,   marginparwidth=0mm, %changed to full width <<<<<<<<<<
        includehead,
        %layoutvoffset= 28.5mm,layouthoffset= 20mm,  % 297-240 = 57mm   210-170 = 40mm ->> to center smaller layout in a4
        %showframe=true,
        %showcrop=true 
        }
    
    % \TufteRecalculate
    \fancyhfoffset[LE]{0pt}
    \fancyhfoffset[RO]{0pt}
}   
{\restoregeometry}%


\begin{fullwidth}
\backmatter

\bibliography{references}
\bibliographystyle{plainnat}


\printtfaqs


%\chapter{Frequently Asked Questions by Topic}
%\label{ch:faq-topical}

%\newcommand{\printOneTopic}[1]{%
%  \section*{#1}%
%  \begin{itemize}%
%    \@for\index:=\csname tfaq@topic@#1\endcsname\do{%
%      \item \csname tfaqitem\index\endcsname\ (p.~\pageref{tfaq:\index})%
%    }%
%  \end{itemize}%
%}

%\@for\topic:=\alltfaqtopics\do{%
%  \printOneTopic{\topic}%
%}



\chapter{List of acronyms}
\begin{acronym}
\acro{CLI}{Command-Line Interface}
\acro{CRUD}{Create, Read, Update, Delete}
\acro{CSS}{Cascading Style Sheets}
\acro{DRY}{Don't Repeat Yourself}
\acro{FAQ}{Frequently Asked Question}
\acro{HTML}{Hypertext Markup Language}
\acro{IDE}{Integrated Development Environment}
\acro{KIP}{King's Inclusion Plan}
\acro{MCF}{Mitigating Circumstances Form}
\acro{SEG}{Software Engineering Group Project}
\acro{UI}{User Interface}
\acro{WYSIWYG}{What You See Is What You Get}
\end{acronym}

\printindex
\end{fullwidth}

\end{document}